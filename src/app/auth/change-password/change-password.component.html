<ng-template #loading>
  <app-loading></app-loading>
</ng-template>

<div *ngIf="!isLoading; else loading" class="grid place-items-center h-[90vh]">
  <form
    class="grid place-items-center max-w-[20rem] w-full"
    [formGroup]="changePasswordFormGroup"
    (ngSubmit)="onSubmit()"
  >
    <h3 class="text-4xl font-bold mb-3">Change Password</h3>

    <div class="form-control w-full mb-2">
      <input
        id="currentPassword"
        type="password"
        class="input input-bordered w-full {{
          setStatusClass(currentPassword)
        }}"
        placeholder="Current Password"
        formControlName="currentPassword"
      />
      <label class="label" for="currentPassword">
        <span class="label-text-alt text-error">
          {{ getCurrentPasswordValidationMessages() }}
        </span>
      </label>
    </div>

    <div class="form-control w-full mb-2">
      <input
        id="newPassword"
        type="password"
        class="input input-bordered w-full {{ setStatusClass(newPassword) }}"
        placeholder="New Password"
        formControlName="newPassword"
      />
      <label class="label" for="newPassword">
        <span class="label-text-alt text-error">
          {{ getNewPasswordValidationMessages() }}
        </span>
      </label>
    </div>

    <div class="form-control w-full mb-2">
      <input
        id="confirmPassword"
        type="password"
        class="input input-bordered w-full {{
          setStatusClass(confirmPassword)
        }}"
        placeholder="Confirm Password"
        formControlName="confirmPassword"
      />
      <label class="label" for="confirmPassword">
        <span class="label-text-alt text-error">
          {{ getConfirmPasswordValidationMessages() }}
        </span>
      </label>
    </div>

    <button
      pRipple
      type="submit"
      class="btn btn-primary w-full"
      [disabled]="!changePasswordFormGroup.valid || waitingForResponse"
    >
      Change
    </button>
  </form>
</div>
