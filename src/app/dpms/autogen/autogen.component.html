<div class="mb-5">
  <h2 class="text-3xl font-bold">Autogenerated DPMs</h2>
  @if (submittedTime(); as submittedTime) {
    <span class="mt-2">
      <em>Submitted &#64; {{ submittedTime }}</em>
    </span>
  }
</div>

@if (!loading()) {
  <div>
    <div class="lg:overflow-x-auto">
      <div class="grid place-items-center rounded-box">
        <table class="table table-fixed lg:table-auto w-full">
          <thead>
            <tr>
              <th class="lg:text-base break-words uppercase">Name</th>
              <th class="lg:text-base break-words uppercase">Block/Time</th>
              <th class="lg:text-base break-words uppercase">Type</th>
            </tr>
          </thead>
          <tbody>
            @for (dpm of autogenDpms(); track dpm) {
              <tr>
                <td class="break-words whitespace-normal">{{ dpm.name }}</td>
                <td class="break-words whitespace-normal">
                  {{ dpm.block }} {{ dpm.startTime }}-{{ dpm.endTime }}
                </td>
                <td class="break-words whitespace-normal">{{ dpm.type }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
    <div class="grid place-items-center">
      @if (submittedTime()) {
        <div class="tooltip" data-tip="Autogen has already been called today">
          <button
            pRipple
            type="button"
            class="btn btn-secondary w-full sm:btn-wide mt-5"
            disabled
          >
            Submit
          </button>
        </div>
      } @else {
        <button
          pRipple
          type="button"
          class="btn btn-secondary w-full sm:btn-wide mt-5"
          [disabled]="empty()"
          (click)="onSubmit()"
        >
          Submit
        </button>
      }
    </div>
  </div>
} @else {
  <app-loading></app-loading>
}
